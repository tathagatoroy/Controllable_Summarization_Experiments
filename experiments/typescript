Script started on 2024-05-25 23:48:52+0530
ls ^X(roy) ]0;tathagato@gnode090: ~/summarization/MACSum/experiments[01;32mtathagato@gnode090[00m:[01;34m~/summarization/MACSum/experiments[00m$ ld [K[K[Kcd scripts/
(roy) ]0;tathagato@gnode090: ~/summarization/MACSum/experiments/scripts[01;32mtathagato@gnode090[00m:[01;34m~/summarization/MACSum/experiments/scripts[00m$ ls
[0m[01;32mall_inference.sh[0m  [01;32mgpu_3.sh[0m                    [01;32mrun_inference.sh[0m        [01;32mtest_inference.sh[0m
all_task.sh       [01;32mgpu_4.sh[0m                    [01;32mrun_task.sh[0m             [01;32mtest_task.sh[0m
config_for_dirs   inference.out               [01;32msbatch.sh[0m               tmp.txt
[01;32mgpu_1.sh[0m          one_attribute_finetune.out  [01;32mtest_code.sh[0m            tmp2.txt
[01;32mgpu_2.sh[0m          output.txt                  [01;32mtest_extractiveness.sh[0m
(roy) ]0;tathagato@gnode090: ~/summarization/MACSum/experiments/scripts[01;32mtathagato@gnode090[00m:[01;34m~/summarization/MACSum/experiments/scripts[00m$ cat all_task[K[K[K[K[K[K[K[K[K[K[K[Kl[Kclear
[H[2J[3J(roy) ]0;tathagato@gnode090: ~/summarization/MACSum/experiments/scripts[01;32mtathagato@gnode090[00m:[01;34m~/summarization/MACSum/experiments/scripts[00m$ ls
[0m[01;32mall_inference.sh[0m  [01;32mgpu_3.sh[0m                    [01;32mrun_inference.sh[0m        [01;32mtest_inference.sh[0m
all_task.sh       [01;32mgpu_4.sh[0m                    [01;32mrun_task.sh[0m             [01;32mtest_task.sh[0m
config_for_dirs   inference.out               [01;32msbatch.sh[0m               tmp.txt
[01;32mgpu_1.sh[0m          one_attribute_finetune.out  [01;32mtest_code.sh[0m            tmp2.txt
[01;32mgpu_2.sh[0m          output.txt                  [01;32mtest_extractiveness.sh[0m
(roy) ]0;tathagato@gnode090: ~/summarization/MACSum/experiments/scripts[01;32mtathagato@gnode090[00m:[01;34m~/summarization/MACSum/experiments/scripts[00m$ cd[K[Kclea[K[K[K[Kcd all[K[K[K[K[K[Kcat sbatch.sh 
#!/bin/bash

#SBATCH -A research
#SBATCH -n 35
#SBATCH --gres=gpu:4
#SBATCH --mem-per-cpu=3000M
#SBATCH --time=4-00:00:00
#SBATCH --job-name=one_attribute_inference
#SBATCH --output=inference.out
#SBATCH --mail-user=tathagato.roy@research.iiit.ac.in
#SBATCH --mail-type=BEGIN
#SBATCH --mail-type=END
#SBATCH --mail-type=FAIL
#SBATCH --mail-type=REQUEUE
#SBATCH --mail-type=ALL
#SBATCH -w gnode090




echo "Activating Conda Environment Virtual Environment"
source /home2/tathagato/miniconda3/bin/activate roy
echo "running script"
./run_inference.sh
# accelerate launch test_finetune_phi.py --attribute length
# accelerate launch test_finetune_phi.py --attribute extractiveness
# accelerate launch test_finetune_phi.py --attribute topic

# accelerate launch test_finetune_phi.py \
#  --attribute length \
# --output_dir /scratch/tathagato/new_adapter_experiments/length
# echo "length done"

# accelerate launch test_finetune_phi.py \
#  --attribute topic \
# --output_dir /scratch/tathagato/new_adapter_experiments/topic
# echo "topic done"

# accelerate launch test_finetune_phi.py \
#  --attribute extractiveness \
# --output_dir /scratch/tathagato/new_adapter_experiments/extractiveness
# echo "extractiveness done"

# #extractiveness and topic
# accelerate launch test_finetune_phi.py \
#  --attribute topic \
# --load_previous_model \
# --previous_model_path /scratch/tathagato/new_adapter_experiments/extractiveness \
# --output_dir /scratch/tathagato/new_adapter_experiments/extractiveness_then_topic
# echo "extractiveness and topic done"
# #length and topic
# accelerate launch test_finetune_phi.py \
#  --attribute topic \
# --load_previous_model \
# --previous_model_path /scratch/tathagato/new_adapter_experiments/length \
# --output_dir /scratch/tathagato/new_adapter_experiments/length_then_topic
# echo "length and topic done"

# #length and extractiveness
# accelerate launch test_finetune_phi.py \
#  --attribute extractiveness \
# --load_previous_model \
# --previous_model_path /scratch/tathagato/new_adapter_experiments/length \
# --output_dir /scratch/tathagato/new_adapter_experiments/length_then_extractiveness
# echo "length and extractiveness done"

# #extractiveness and length
# accelerate launch test_finetune_phi.py \
#  --attribute length \
# --load_previous_model \
# --previous_model_path /scratch/tathagato/new_adapter_experiments/extractiveness \
# --output_dir /scratch/tathagato/new_adapter_experiments/extractiveness_then_length
# echo "extractiveness and length done"

# #topic and length
# accelerate launch test_finetune_phi.py \
#  --attribute length \
# --load_previous_model \
# --previous_model_path /scratch/tathagato/new_adapter_experiments/topic \
# --output_dir /scratch/tathagato/new_adapter_experiments/topic_then_length
# echo "topic and length done"

# #topic and extractiveness
# accelerate launch test_finetune_phi.py \
#  --attribute extractiveness \
# --load_previous_model \
# --previous_model_path /scratch/tathagato/new_adapter_experiments/topic \
# --output_dir /scratch/tathagato/new_adapter_experiments/topic_then_extractiveness
# echo "topic and extractiveness done"

echo "Completed"




(roy) ]0;tathagato@gnode090: ~/summarization/MACSum/experiments/scripts[01;32mtathagato@gnode090[00m:[01;34m~/summarization/MACSum/experiments/scripts[00m$ clear
[H[2J[3J(roy) ]0;tathagato@gnode090: ~/summarization/MACSum/experiments/scripts[01;32mtathagato@gnode090[00m:[01;34m~/summarization/MACSum/experiments/scripts[00m$ ct[Kat run_inference.sh  [A
#!/bin/bash

source /home2/tathagato/miniconda3/bin/activate roy

echo "starting  gpu 1 in the background"
./gpu_1.sh > /home2/tathagato/summarization/MACSum/experiments/logs/gpu_1.log 2>&1 &
#get pid 
pid_1=$!

echo "starting  gpu 2 in the background"
./gpu_2.sh > /home2/tathagato/summarization/MACSum/experiments/logs/gpu_2.log 2>&1 &
#get pid
pid_2=$!

echo "starting gpu in the background"
./gpu_3.sh > /home2/tathagato/summarization/MACSum/experiments/logs/gpu_3.log  2>&1 &
#get pid
pid_3=$!

echo "starting  gpu 4 in the background"
./gpu_4.sh > /home2/tathagato/summarization/MACSum/experiments/logs/gpu_4.log 2>&1 &
#get pid
pid_4=$!
#wait for all pid
wait $pid_1 $pid_2 $pid_3 $pid_4
# wait $pid_1 $pid_2 
echo "all done"
(roy) ]0;tathagato@gnode090: ~/summarization/MACSum/experiments/scripts[01;32mtathagato@gnode090[00m:[01;34m~/summarization/MACSum/experiments/scripts[00m$ clear
[H[2J[3J(roy) ]0;tathagato@gnode090: ~/summarization/MACSum/experiments/scripts[01;32mtathagato@gnode090[00m:[01;34m~/summarization/MACSum/experiments/scripts[00m$ sbatch sbatch.sh 
Submitted batch job 1145705
(roy) ]0;tathagato@gnode090: ~/summarization/MACSum/experiments/scripts[01;32mtathagato@gnode090[00m:[01;34m~/summarization/MACSum/experiments/scripts[00m$ kpn[K[K[Kjobs
             JOBID PARTITION     NAME     USER ST       TIME  NODES NODELIST(REASON)
           1145705      long one_attr tathagat PD       0:00      1 (QOSMaxCpuPerUserLimit)
           1145694      long interact tathagat  R       9:02      1 gnode090
(roy) ]0;tathagato@gnode090: ~/summarization/MACSum/experiments/scripts[01;32mtathagato@gnode090[00m:[01;34m~/summarization/MACSum/experiments/scripts[00m$ scancel `[K11456[Carg: 1) scancel 11456[K[C[C[C[C[C[C9[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[1@4[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C(roy) ]0;tathagato@gnode090: ~/summarization/MACSum/experiments/scripts[01;32mtathagato@gnode090[00m:[01;34m~/summarization/MACSum/experiments/scripts[00m$ scancel 11456[Kc[Kscancel 1145684[K[K94
(roy) ]0;tathagato@gnode090: ~/summarization/MACSum/experiments/scripts[01;32mtathagato@gnode090[00m:[01;34m~/summarization/MACSum/experiments/scripts[00m$ jobs
             JOBID PARTITION     NAME     USER ST       TIME  NODES NODELIST(REASON)
           1